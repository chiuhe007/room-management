# æˆ¿å‹å›¾ç‰‡æ•°æ®åº“é›†æˆå®Œæˆ

## ğŸ”§ é—®é¢˜ä¿®å¤

æ‚¨æåˆ°çš„é—®é¢˜å·²ç»ä¿®å¤ï¼ç°åœ¨å°ç¨‹åºçš„"æˆ‘çš„é¢„è®¢"é¡µé¢**ä»æ•°æ®åº“åŠ¨æ€è·å–æˆ¿å‹å›¾ç‰‡**ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç¡¬ç¼–ç çš„é™æ€å›¾ç‰‡è·¯å¾„ã€‚

## âœ… ä¿®å¤å†…å®¹

### 1. æ•°æ®åº“å›¾ç‰‡é›†æˆ
```javascript
// é¡µé¢åŠ è½½æ—¶è·å–æˆ¿é—´ä¿¡æ¯
loadRoomTypeInfo: function() {
  api.getRooms().then(res => {
    // å¤„ç†æˆ¿é—´æ•°æ®ï¼Œå»ºç«‹æˆ¿å‹â†’å›¾ç‰‡æ˜ å°„
    const roomTypeMap = {}
    rooms.forEach(room => {
      if (room.type && !roomTypeMap[room.type]) {
        roomTypeMap[room.type] = {
          image: room.image || '',      // ğŸ¯ ä»æ•°æ®åº“è·å–
          description: room.description,
          price: room.price
        }
      }
    })
    this.setData({ roomTypeMap })
  })
}
```

### 2. åŠ¨æ€å›¾ç‰‡è·å–
```javascript
// ä¿®å¤å‰ï¼šç¡¬ç¼–ç å›¾ç‰‡è·¯å¾„
getRoomTypeImage: function(roomType) {
  const imageMap = {
    'å•äººæˆ¿': '/images/room-single.jpg',  // âŒ é™æ€è·¯å¾„
    'åŒäººæˆ¿': '/images/room-double.jpg',  // âŒ é™æ€è·¯å¾„
    // ...
  }
  return imageMap[roomType] || '/images/room-default.jpg'
}

// ä¿®å¤åï¼šä»æ•°æ®åº“è·å–
getRoomTypeImage: function(roomType) {
  const roomInfo = this.data.roomTypeMap[roomType]
  if (roomInfo && roomInfo.image) {
    // ğŸ¯ ä½¿ç”¨æ•°æ®åº“ä¸­çš„å›¾ç‰‡URL
    if (roomInfo.image.startsWith('/')) {
      return `http://localhost:3000${roomInfo.image}`
    }
    return roomInfo.image
  }
  return '/images/room-placeholder.png'
}
```

### 3. é¡µé¢ç”Ÿå‘½å‘¨æœŸé›†æˆ
```javascript
onLoad: function() {
  this.loadHiddenBookings()
  this.loadRoomTypeInfo()  // ğŸ¯ åŠ è½½æˆ¿å‹å›¾ç‰‡ä¿¡æ¯
  this.checkUserLogin()
}

onShow: function() {
  // ...
  this.loadRoomTypeInfo()  // ğŸ¯ ç¡®ä¿å›¾ç‰‡ä¿¡æ¯æ˜¯æœ€æ–°çš„
}
```

## ğŸ¯ ç°åœ¨çš„å·¥ä½œæ–¹å¼

### æ•°æ®æµç¨‹
```
å°ç¨‹åºé¡µé¢åŠ è½½ â†’ è°ƒç”¨ api.getRooms() â†’ è·å–æ•°æ®åº“æˆ¿é—´æ•°æ® 
                                      â†“
æˆ¿å‹å›¾ç‰‡æ˜ å°„å»ºç«‹ â† æå–æˆ¿å‹å’Œå¯¹åº”å›¾ç‰‡ â† å¤„ç†å“åº”æ•°æ®
                                      â†“
é¢„è®¢åˆ—è¡¨æ˜¾ç¤º â†’ ä½¿ç”¨ getRoomTypeImage() â†’ è¿”å›æ•°æ®åº“ä¸­çš„å›¾ç‰‡URL
```

### ä¸æˆ¿é—´åˆ—è¡¨é¡µé¢ä¿æŒä¸€è‡´
- âœ… **åŒæ ·çš„API**: éƒ½è°ƒç”¨ `/api/rooms`
- âœ… **åŒæ ·çš„æ•°æ®**: éƒ½ä» `rooms` è¡¨è·å–å›¾ç‰‡
- âœ… **åŒæ ·çš„é€»è¾‘**: éƒ½æŒ‰æˆ¿å‹åˆ†ç»„è·å–å›¾ç‰‡
- âœ… **åŒæ ·çš„å®¹é”™**: éƒ½æœ‰å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†

## ğŸ” æ•°æ®åº“å›¾ç‰‡ç®¡ç†

### åç«¯å­˜å‚¨æ–¹å¼
```
æ•°æ®åº“ rooms è¡¨:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ type    â”‚ price  â”‚ image                        â”‚ status  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ åŒäººæˆ¿  â”‚ 349.00 â”‚ /uploads/rooms/double-1.jpg  â”‚ availableâ”‚
â”‚ 2  â”‚ å¥—æˆ¿    â”‚ 599.00 â”‚ /uploads/rooms/suite-1.jpg   â”‚ availableâ”‚
â”‚ 3  â”‚ å®¶åº­æˆ¿  â”‚ 399.00 â”‚ /uploads/rooms/family-1.jpg  â”‚ availableâ”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å›¾ç‰‡URLå¤„ç†
- **æ•°æ®åº“å­˜å‚¨**: `/uploads/rooms/filename.jpg` (ç›¸å¯¹è·¯å¾„)
- **å°ç¨‹åºæ˜¾ç¤º**: `http://localhost:3000/uploads/rooms/filename.jpg` (å®Œæ•´URL)
- **è‡ªåŠ¨è½¬æ¢**: ä»£ç ä¼šè‡ªåŠ¨å¤„ç†è·¯å¾„è½¬æ¢

## ğŸ‰ ä¿®å¤æ•ˆæœ

ç°åœ¨"æˆ‘çš„é¢„è®¢"é¡µé¢ä¸­çš„æˆ¿å‹å›¾ç‰‡ï¼š

1. **ğŸ“Š åŠ¨æ€è·å–**: ä»æ•°æ®åº“å®æ—¶è·å–æœ€æ–°å›¾ç‰‡
2. **ğŸ”„ è‡ªåŠ¨åŒæ­¥**: ä¸æˆ¿é—´åˆ—è¡¨é¡µé¢å›¾ç‰‡ä¿æŒä¸€è‡´
3. **âš™ï¸ åå°ç®¡ç†**: å¯é€šè¿‡åå°ç³»ç»Ÿç®¡ç†å›¾ç‰‡
4. **ğŸ›¡ï¸ å®¹é”™å¤„ç†**: å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æœ‰å¤‡é€‰æ–¹æ¡ˆ
5. **ğŸš€ æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨æ‡’åŠ è½½æé«˜æ€§èƒ½

## ğŸ“‹ æµ‹è¯•éªŒè¯

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ä¿®å¤æ•ˆæœï¼š

1. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**: 
   ```
   ğŸ  æˆ¿é—´ä¿¡æ¯å“åº”: [æˆ¿é—´æ•°æ®]
   ğŸ–¼ï¸ æˆ¿å‹å›¾ç‰‡æ˜ å°„: {åŒäººæˆ¿: {image: "..."}, ...}
   ```

2. **æ£€æŸ¥å›¾ç‰‡URL**:
   - åº”è¯¥çœ‹åˆ°å®Œæ•´çš„å›¾ç‰‡URLè€Œä¸æ˜¯é™æ€è·¯å¾„
   - æ ¼å¼ç±»ä¼¼ï¼š`http://localhost:3000/uploads/rooms/xxx.jpg`

3. **å¯¹æ¯”æˆ¿é—´åˆ—è¡¨**:
   - ç›¸åŒæˆ¿å‹åœ¨ä¸¤ä¸ªé¡µé¢åº”æ˜¾ç¤ºç›¸åŒå›¾ç‰‡
   - è¯æ˜æ•°æ®æ¥æºä¸€è‡´

ç°åœ¨æˆ¿å‹å›¾ç‰‡å®Œå…¨æŒ‰ç…§æ‚¨çš„è¦æ±‚ï¼Œå‚ç…§bookingé¡µé¢çš„æ–¹å¼ï¼Œä»æ•°æ®åº“æŸ¥è¯¢è·å–ï¼ğŸ¯